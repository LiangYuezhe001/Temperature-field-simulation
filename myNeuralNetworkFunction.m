function [y1] = myNeuralNetworkFunction(x1)
%MYNEURALNETWORKFUNCTION neural network simulation function.
%
% Auto-generated by MATLAB, 21-Feb-2023 17:50:26.
%
% [y1] = myNeuralNetworkFunction(x1) takes these arguments:
%   x = 5xQ matrix, input #1
% and returns:
%   y = 3xQ matrix, output #1
% where Q is the number of samples.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [41.7859453823747;71.1492147930569;75.8565029661117;1;400];
x1_step1.gain = [0.0065772511752988;0.00587922244404961;0.00532608008159604;0.0202020202020202;0.005];
x1_step1.ymin = -1;

% Layer 1
b1 = [2.1838909731725473229;-2.2164900991389480112;-1.7839811359153041614;-2.2693483226337995973;-1.5384292286973084707;-1.9484886392449736192;1.4400464132081531865;1.2967104265495295046;-0.63861831211284902921;0.37864988222386475325;-0.069502794170096096615;-0.61688038000143086137;-0.078710664168432795118;-0.43117362235734946196;0.30185908430864688556;0.36726967336854704493;1.4781162820029429827;0.78226763435924706602;-1.1658374248238432269;1.4060962850400471336;-1.3432848464721038884;1.8190388176084675287;2.1716405826553684122;2.8363782067390466146;-2.2702486368630183655];
IW1_1 = [-1.5765018113753950235 1.0718356719817041522 0.38410319838457185337 1.528220696152384539 -0.41784155387138027793;-0.12306773711985503905 1.7753652600784062265 1.0681349568907068104 -0.97490785914415700741 -0.48858090834092987587;0.52070917991267051672 -0.93525486968826387901 -0.082705769933501621649 -1.2055826438476224816 1.0927432471073357245;0.87225620221718980218 -1.3211996759566133619 -1.0697736845434480113 0.084210954568292015199 -0.47777156555853728115;0.53868531095818417143 0.81549815572694162036 -0.33098772423141520349 -0.080043006147319892274 1.0509114688059220111;1.1512580403397774109 0.77941671339396834117 -1.2730633442940708644 1.2850601403395560673 0.40447767331768652577;-0.35049885319814239049 -0.13922318655951168576 1.503537076612689205 -0.31263336095022603578 -0.91646734664523910041;-0.6043857078855293663 1.5425619607451201976 0.52813647021871024112 0.85141252834543712513 1.0310094254084316567;0.98982895190315378642 0.61146059330596036485 0.11861121770925234231 0.0055798203357618645845 -0.7812193023276358117;-1.3199133211729658921 -0.88675680601530160185 0.9151514199848990172 0.098891794881396363759 0.72779566581184373941;1.0827484473004262977 1.0737389117109776837 0.11864505126839543225 -0.56806230982610061986 -0.63180356280093075139;1.1629698302607995863 0.19820366877465261934 1.8571320624446820968 -0.32356435734172167562 0.60924573699299422458;-0.27010958341159341245 -0.4675774835617354519 -0.96780112391951100825 1.6073844817794156192 -0.74062534977101146527;-0.54937545706430201964 -1.1646270307975852276 0.13703954308886642788 1.1262490972489296315 0.91328062412059618502;-0.23531170905524517734 1.328215923956580502 1.2686340077974596063 -0.66523512528778405706 -0.58132719469535076851;0.68147683993584373674 -1.054201878036587825 0.56588280049461470167 0.45340966498212048608 -0.51037829101937481902;0.36031558981747685566 -1.1001638815383565362 1.5662666532658418017 0.23184509445967108054 -0.53139961684015479815;-0.41437434090962799171 2.1909567231746533977 -1.3583483037115213765 0.0094798617101315880984 -0.30303198040358647614;-1.1371768849257748446 0.41458970698305169789 0.22821155439618309724 0.62748100220112301706 1.0197776701063041571;0.078653075280077117126 1.1192969754994823717 0.75869629109008318579 0.85665277585085441991 1.8710944672829810109;-1.6251868285215662624 -0.77075723823112984867 -0.55314688421184587952 -0.60075320425541745006 0.40225083788286042363;0.29185803995931464128 1.1862866882399096813 -0.63452253066781538759 1.9014358875146308847 -0.92471985486878005567;0.99870790092879901945 0.227421658348183231 -1.6524111419645270971 1.2114531654821538709 0.0076404234278303409522;0.37644632612083056555 0.35858386684201742911 -1.3072592244011582707 -1.3390455550062627665 -1.3199822935958189785;-1.1419785432712017403 -1.8784421697790560923 0.59418480401504514266 -1.3912025279779043352 -0.64577545382605017199];

% Layer 2
b2 = [-0.91922846031878857609;0.38404273292304663689;-0.19486649221523688613];
LW2_1 = [0.021710790360508779723 0.0083126380672217583395 0.0043492077982560757229 -0.36695527017300139105 0.14795283214220361634 -0.097058136399059677379 0.62505722985159806182 0.18300320476054215968 0.31484240409185498821 0.20637733748970024661 0.13267258594430175744 -0.0014166327345725331435 -0.0014699637333388539638 -0.00016373528936532394211 -0.11296801983481867537 -0.70291684913869711959 -0.47657524770242348788 1.530319548215989256 0.53152006038458299297 -0.021187155505591134114 0.06168888925879056212 0.031344362182209734025 0.17854815279876112832 -0.16947741330740051513 -0.023569458775721825045;-0.043885233789906934188 -0.000431667665281297336 0.12275486277440336713 0.035621458910605863224 -0.030295698356292453252 -0.032574507586692891259 0.17302197025649726503 -0.060666703583955317036 -0.059499692917622706845 -0.1106502792194182655 -0.0039026324780716539417 0.0031889183424381206157 0.00033597086728382987353 0.00059179706585000678865 0.0058176233268476800625 -0.5395200427302212498 -0.49185041652178085325 0.047533290265401630104 0.085187424730586533417 0.10756688095299024588 -0.0090261377087065657043 -0.24950221639427597187 -0.049347786477415736539 -0.017939687546744714775 0.053556376005761269221;0.010372596132109276196 -0.0033092007772000677467 0.30297541110025194566 0.053281588979800759143 -0.085222846776471516961 -0.058860522526725272963 -0.12607951853439924861 -0.076233189135303511264 -0.12059384822885403643 -0.039944113667813176127 -0.00054550978363319371951 0.0027666225423610391575 0.00037430017535862328357 0.0015317347818647980388 0.0032895079540701996877 -0.49351378842819620951 -0.24096073833771644579 0.94716546277907309737 0.0035784520383645053443 0.12492260067420042635 -0.0098333867936770836399 -0.33614576067191370701 -0.021539938030105638261 -0.061475211696468502753 0.070631369626593720756];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = [0.00642801409704261;0.00322090559570099;0.0029795691409441];
y1_step1.xoffset = [107.082989821467;111.131474083176;111.542708427192];

% ===== SIMULATION ========

% Dimensions
Q = size(x1,2); % samples

% Input 1
xp1 = mapminmax_apply(x1,x1_step1);

% Layer 1
a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*xp1);

% Layer 2
a2 = repmat(b2,1,Q) + LW2_1*a1;

% Output 1
y1 = mapminmax_reverse(a2,y1_step1);
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
y = bsxfun(@minus,x,settings.xoffset);
y = bsxfun(@times,y,settings.gain);
y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
x = bsxfun(@minus,y,settings.ymin);
x = bsxfun(@rdivide,x,settings.gain);
x = bsxfun(@plus,x,settings.xoffset);
end
